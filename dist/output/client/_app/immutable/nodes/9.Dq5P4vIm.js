import"../chunks/Bg9kRutz.js";import"../chunks/S6wLSpnM.js";import{p as be,b as ve,s,c as a,d as i,g as e,m as b,r as o,t as we,e as v}from"../chunks/CPz9NqMD.js";import{i as G,e as d}from"../chunks/DM5mFc0n.js";import{a as h,t as _}from"../chunks/CnZq424f.js";import{e as ge,i as xe}from"../chunks/C1cPdbVw.js";import{r as u}from"../chunks/CNcTiupO.js";import{b as c}from"../chunks/Bobbsvk_.js";import{p as ye}from"../chunks/CWmzcjye.js";import{i as he}from"../chunks/CxZb-nwJ.js";import{o as _e}from"../chunks/CTsj7Z0s.js";import{g as X}from"../chunks/B2XhxK2B.js";import{a as Y}from"../chunks/upsvKRUO.js";import{g as Pe}from"../chunks/DlQj9-fi.js";import{N as Z}from"../chunks/DzgOfrvm.js";var ke=_('<div class="h-4 bg-gray-700 rounded w-3/4"></div>'),Ne=_('<div class="bg-gray-800 p-8 rounded-b-2xl shadow-xl"><div class="animate-pulse space-y-4"></div></div>'),Ce=_('<p class="text-red-500 text-sm mt-1">Invalid Roll or Batch</p>'),De=_('<p class="text-red-500 text-sm mt-1">Passwords do not match</p>'),Ie=_('<form class="bg-gray-800 p-6 rounded-b-2xl shadow-xl space-y-6"><div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="fullName" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Name</label> <input id="fullName" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="username" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Username</label> <input id="username" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="email" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Email</label> <input id="email" type="email" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="roll" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Roll Number</label> <input id="roll" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="roll" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Phone Number</label> <input id="roll" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="batch" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Batch</label> <input id="batch" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"> <!></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="facebookProfile" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Facebook Profile</label> <input id="facebookProfile" type="url" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="password" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">New Password</label> <input id="password" type="password" placeholder="Enter New Password" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="confirmPassword" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Confirm Password</label> <input id="confirmPassword" type="password" placeholder="Confirm Password" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"> <!></div> <div class="flex flex-col justify-center sm:flex-row sm:gap-4 mt-8 sm:mt-6 gap-4"><button type="submit" class="bg-gradient-to-r from-green-400 to-blue-500 text-white font-semibold py-2 px-8 rounded-full shadow-md hover:scale-105 transform transition-all duration-200 ease-in-out w-full sm:w-auto">Save Changes</button> <button type="button" class="bg-red-500 text-white font-semibold py-2 px-8 rounded-full shadow-md hover:scale-105 transform transition-all duration-200 ease-in-out w-full sm:w-auto">Discard Changes</button> <button type="button" class="bg-gray-600 text-white font-semibold py-2 px-8 rounded-full shadow-md hover:scale-105 transform transition-all duration-200 ease-in-out w-full sm:w-auto">Reset Fields</button></div></form>'),Re=_('<div class="min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"><div class="max-w-3xl mx-auto"><div class="bg-gray-800 rounded-t-2xl p-6 shadow-xl text-center"><h1 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-300 to-blue-300 mb-2">Edit Profile</h1> <p class="text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-purple-300">Update your account details</p></div> <!></div></div>');function Ge(ee,te){be(te,!1);let B=0,w={},E=b(!0),t=b({...w}),p=b(""),g=b(""),C=b(!1),x=b(!0),y=b(!0);_e(async()=>{try{const l=localStorage.getItem("jwtToken");l?(B=Pe(l),w=(await Y.get(`https://ndc14backend.onrender.com/api/v2/users/id/${B}`)).data.data,s(t,{...w}),s(E,!1)):X("/login")}catch(l){console.error(l),s(E,!1)}});function m(){s(C,JSON.stringify(e(t))!==JSON.stringify(w)||e(p)!==""||e(g)!==""),re()}function H(){s(x,e(p)===e(g))}function re(){const l=e(t).batch.slice(-2),n=e(t).roll.slice(1,3);s(y,l===n)}async function ae(){try{if(e(x)&&e(y)){const l={...e(t),password:e(p),batch:Number(e(t).batch)};await Y.put(`https://ndc14backend.onrender.com/api/v2/users/update/${B}`,l),Z("Profile updated successfully","success"),X("/dashboard/account"),s(C,!1)}}catch(l){console.error(l),Z("Error updating profile","error")}}function se(){s(t,{...w}),s(p,""),s(g,""),s(C,!1),s(x,!0),s(y,!0),oe()}function le(){s(t,{...w}),s(p,""),s(g,""),s(x,!0),s(y,!0)}function oe(){window.history.back()}he();var L=Re(),K=i(L),ie=a(i(K),2);{var de=l=>{var n=Ne(),f=i(n);ge(f,4,()=>Array(6),xe,(P,D)=>{var k=ke();h(P,k)}),o(f),o(n),h(l,n)},ne=l=>{var n=Ie(),f=i(n),P=a(i(f),2);u(P),o(f);var D=a(f,2),k=a(i(D),2);u(k),o(D);var M=a(D,2),S=a(i(M),2);u(S),o(M);var F=a(M,2),T=a(i(F),2);u(T),o(F);var j=a(F,2),J=a(i(j),2);u(J),o(j);var O=a(j,2),I=a(i(O),2);u(I);var me=a(I,2);{var ue=r=>{var z=Ce();h(r,z)};G(me,r=>{e(y)||r(ue)})}o(O);var U=a(O,2),$=a(i(U),2);u($),o(U);var A=a(U,2),R=a(i(A),2);u(R),o(A);var q=a(A,2),N=a(i(q),2);u(N);var ce=a(N,2);{var pe=r=>{var z=De();h(r,z)};G(ce,r=>{e(x)||r(pe)})}o(q);var Q=a(q,2),V=i(Q),W=a(V,2),fe=a(W,2);o(Q),o(n),we(()=>V.disabled=!e(C)||!e(x)||!e(y)),c(P,()=>e(t).fullName,r=>v(t,e(t).fullName=r)),d("input",P,m),c(k,()=>e(t).username,r=>v(t,e(t).username=r)),d("input",k,m),c(S,()=>e(t).email,r=>v(t,e(t).email=r)),d("input",S,m),c(T,()=>e(t).roll,r=>v(t,e(t).roll=r)),d("input",T,m),c(J,()=>e(t).phone,r=>v(t,e(t).phone=r)),d("input",J,m),c(I,()=>e(t).batch,r=>v(t,e(t).batch=r)),d("input",I,m),c($,()=>e(t).fbLink,r=>v(t,e(t).fbLink=r)),d("input",$,m),c(R,()=>e(p),r=>s(p,r)),d("input",R,m),d("blur",R,H),c(N,()=>e(g),r=>s(g,r)),d("input",N,m),d("blur",N,H),d("click",W,se),d("click",fe,le),d("submit",n,ye(ae)),h(l,n)};G(ie,l=>{e(E)?l(de):l(ne,!1)})}o(K),o(L),h(ee,L),ve()}export{Ge as component};
