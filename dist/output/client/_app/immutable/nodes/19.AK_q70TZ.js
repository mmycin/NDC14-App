import"../chunks/Bg9kRutz.js";import"../chunks/S6wLSpnM.js";import{p as Ee,m as p,g as e,y as de,z as Se,t as ce,b as Te,s as a,c as s,d as i,r as o,e as x}from"../chunks/CPz9NqMD.js";import{s as me}from"../chunks/Btzz-3rd.js";import{i as K,e as d}from"../chunks/DM5mFc0n.js";import{e as Re,i as Be}from"../chunks/C1cPdbVw.js";import{a as P,t as N}from"../chunks/CnZq424f.js";import{r as u,a as Le}from"../chunks/CNcTiupO.js";import{b}from"../chunks/Bobbsvk_.js";import{p as Me}from"../chunks/CWmzcjye.js";import{i as Fe}from"../chunks/CxZb-nwJ.js";import{s as je,a as Je}from"../chunks/nnGI3RHF.js";import{p as Oe}from"../chunks/BXn2Jmfg.js";import{o as Ue}from"../chunks/CTsj7Z0s.js";import{a as Q}from"../chunks/upsvKRUO.js";import{I as Ye,a as ze,g as Ve}from"../chunks/DlQj9-fi.js";import{N as fe}from"../chunks/DzgOfrvm.js";import"../chunks/B2XhxK2B.js";var qe=N('<div class="h-4 bg-gray-700 rounded w-3/4"></div>'),Ge=N('<div class="bg-gray-800 p-8 rounded-b-2xl shadow-xl"><div class="animate-pulse space-y-4"></div></div>'),He=N('<p class="text-red-500 text-sm mt-1">Invalid Roll or Batch</p>'),Ke=N('<p class="text-red-500 text-sm mt-1">Passwords do not match</p>'),Qe=N(`<form class="bg-gray-800 p-6 rounded-b-2xl shadow-xl space-y-6"><div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="fullName" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Name</label> <input id="fullName" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="username" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Username</label> <input id="username" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="email" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Email</label> <input id="email" type="email" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="roll" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Roll Number</label> <input id="roll" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="roll" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Phone Number</label> <input id="roll" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="batch" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Batch</label> <input id="batch" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"> <!></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="facebookProfile" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Facebook Profile</label> <input id="facebookProfile" type="url" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="password" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">New Password</label> <input id="password" type="password" placeholder="Enter New Password" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="confirmPassword" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Confirm Password</label> <input id="confirmPassword" type="password" placeholder="Confirm Password" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"> <!></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="isAdmin" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Administrator Access</label> <div class="w-full sm:w-2/3 flex items-center"><label class="inline-flex items-center cursor-pointer"><input id="isAdmin" type="checkbox" class="sr-only peer"> <div class="relative w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500"></div> <span class="ms-3 text-sm font-medium text-gray-300"> </span></label></div></div> <div class="flex flex-col justify-center sm:flex-row sm:gap-4 mt-8 sm:mt-6 gap-4"><button type="submit" class="bg-gradient-to-r from-green-400 to-blue-500 text-white font-semibold py-2 px-8 rounded-full shadow-md hover:scale-105 transform transition-all duration-200 ease-in-out w-full sm:w-auto">Save Changes</button> <button type="button" class="bg-red-500 text-white font-semibold py-2 px-8 rounded-full shadow-md hover:scale-105 transform transition-all duration-200 ease-in-out w-full sm:w-auto">Discard Changes</button> <button type="button" class="bg-gray-500 text-white font-semibold py-2 px-8 rounded-full shadow-md hover:scale-105 transform transition-all duration-200 ease-in-out w-full sm:w-auto">Reset Fields</button></div></form>`),We=N('<div class="min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"><div class="max-w-3xl mx-auto"><div class="bg-gray-800 rounded-t-2xl p-6 shadow-xl text-center"><h1 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-300 to-blue-300 mb-2">Edit Information</h1> <p class="text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-purple-300"> </p></div> <!></div></div>');function vt(pe,ue){Ee(ue,!1);const be=je(),W=()=>Je(Oe,"$page",be),S=p();let c=p({}),T=p(!0),t=p({...e(c)}),h=p(""),_=p(""),D=p(!1),k=p(!0),v=p(!0),w=p(!1);async function ve(){try{const r=localStorage.getItem("jwtToken");if(r&&Ye(r)&&!ze(r)){const n=Ve(r);X=await(await Q.get(`https://ndc14backend.onrender.com/api/v2/users/id/${n}`)).data.data,(!X.isAdmin||!e(S))&&window.history.back()}}catch(r){console.error(r)}}let X={};Ue(async()=>{window.location.href.includes("/users/edit")?document.documentElement.style.overflowY="hidden":document.documentElement.style.overflowY="auto";try{const r=await Q.get(`https://ndc14backend.onrender.com/api/v2/users/id/${e(S)}`);a(c,await r.data.data),a(t,{...e(c)}),a(w,e(t).isAdmin||!1),a(T,!1)}catch(r){console.error(r),a(T,!1)}});function m(r){var n;((n=r==null?void 0:r.target)==null?void 0:n.id)==="isAdmin"&&(r.preventDefault(),x(t,e(t).isAdmin=r.target.checked),a(w,r.target.checked),window.scrollTo({top:0,behavior:"smooth"})),a(D,JSON.stringify(e(t))!==JSON.stringify(e(c))||e(h)!==""||e(_)!==""),e(t).batch&&e(t).roll&&we()}function Z(){a(k,e(h)===e(_))}function we(){var f,g;if(!((f=e(t))!=null&&f.batch)||!((g=e(t))!=null&&g.roll)){a(v,!0);return}const r=String(e(t).batch),n=String(e(t).roll);if(r.length>=2&&n.length>=3){const A=r.slice(-2),y=n.slice(1,3);a(v,A===y)}else a(v,!1)}async function ge(){try{if(e(k)&&e(v)){a(w,e(t).isAdmin);const r={...e(t),password:e(h),batch:Number(e(t).batch),isAdmin:e(w)};await Q.put(`https://ndc14backend.onrender.com/api/v2/users/update/${e(c).ID}`,r),fe("Profile updated successfully","success"),ee(),a(D,!1)}}catch(r){console.error(r),fe("Error updating profile","error")}}function xe(){a(t,{...e(c)}),a(h,""),a(_,""),a(D,!1),a(k,!0),a(v,!0),a(w,e(c).isAdmin||!1),ee()}function he(){a(t,{...e(c)}),a(h,""),a(_,""),a(k,!0),a(v,!0),a(w,e(c).isAdmin||!1)}function ee(){window.history.back()}de(()=>W(),()=>{var r;a(S,(r=W().state)==null?void 0:r.id)}),de(()=>{},()=>{ve()}),Se(),Fe();var R=We(),te=i(R),B=i(te),re=s(i(B),2),ye=i(re);o(re),o(B);var _e=s(B,2);{var ke=r=>{var n=Ge(),f=i(n);Re(f,4,()=>Array(6),Be,(g,A)=>{var y=qe();P(g,y)}),o(f),o(n),P(r,n)},Ae=r=>{var n=Qe(),f=i(n),g=s(i(f),2);u(g),o(f);var A=s(f,2),y=s(i(A),2);u(y),o(A);var L=s(A,2),M=s(i(L),2);u(M),o(L);var F=s(L,2),j=s(i(F),2);u(j),o(F);var J=s(F,2),O=s(i(J),2);u(O),o(J);var U=s(J,2),C=s(i(U),2);u(C);var Pe=s(C,2);{var Ne=l=>{var H=He();P(l,H)};K(Pe,l=>{e(v)||l(Ne)})}o(U);var Y=s(U,2),z=s(i(Y),2);u(z),o(Y);var V=s(Y,2),$=s(i(V),2);u($),o(V);var q=s(V,2),I=s(i(q),2);u(I);var Ie=s(I,2);{var De=l=>{var H=Ke();P(l,H)};K(Ie,l=>{e(k)||l(De)})}o(q);var G=s(q,2),ae=s(i(G),2),se=i(ae),E=i(se);u(E);var le=s(E,4),Ce=i(le,!0);o(le),o(se),o(ae),o(G);var oe=s(G,2),ie=i(oe),ne=s(ie,2),$e=s(ne,2);o(oe),o(n),ce(()=>{Le(E,e(w)),me(Ce,e(w)?"Enabled":"Disabled"),ie.disabled=!e(D)||!e(k)||!e(v)}),b(g,()=>e(t).fullName,l=>x(t,e(t).fullName=l)),d("input",g,m),b(y,()=>e(t).username,l=>x(t,e(t).username=l)),d("input",y,m),b(M,()=>e(t).email,l=>x(t,e(t).email=l)),d("input",M,m),b(j,()=>e(t).roll,l=>x(t,e(t).roll=l)),d("input",j,m),b(O,()=>e(t).phone,l=>x(t,e(t).phone=l)),d("input",O,m),b(C,()=>e(t).batch,l=>x(t,e(t).batch=l)),d("input",C,m),b(z,()=>e(t).fbLink,l=>x(t,e(t).fbLink=l)),d("input",z,m),b($,()=>e(h),l=>a(h,l)),d("input",$,m),d("blur",$,Z),b(I,()=>e(_),l=>a(_,l)),d("input",I,m),d("blur",I,Z),d("change",E,m),d("click",ne,xe),d("click",$e,he),d("submit",n,Me(ge)),P(r,n)};K(_e,r=>{e(T)?r(ke):r(Ae,!1)})}o(te),o(R),ce(()=>me(ye,`Update account of ID: ${e(c).ID??""}`)),P(pe,R),Te()}export{vt as component};
