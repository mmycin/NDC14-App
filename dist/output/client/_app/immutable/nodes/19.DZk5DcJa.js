import"../chunks/Bg9kRutz.js";import"../chunks/CZwOOZ8X.js";import{p as Be,m,g as e,l as Q,b as Le,t as ue,c as Te,s as a,d as s,e as i,r as o,i as x}from"../chunks/C49fxnTX.js";import{s as pe}from"../chunks/CpG_a03V.js";import{i as W,e as d}from"../chunks/Cd7jppo2.js";import{e as Ue,i as Me}from"../chunks/6_bSFVyE.js";import{a as P,t as I}from"../chunks/BVyY2eYF.js";import{r as p,a as Fe}from"../chunks/C55JGdRg.js";import{b}from"../chunks/DY5b5QkI.js";import{p as je}from"../chunks/CWmzcjye.js";import{i as Je}from"../chunks/Dza9i49Z.js";import{s as Oe,a as be}from"../chunks/CZe-tk6V.js";import{p as Ye}from"../chunks/BTqaQyuM.js";import{o as Ve}from"../chunks/rzUrWnQ3.js";import{a as X,B as qe}from"../chunks/D4POEFCI.js";import{I as ze,a as Ge,g as He}from"../chunks/DlQj9-fi.js";import{N as we}from"../chunks/DzgOfrvm.js";import"../chunks/DkGKsnCd.js";var Ke=I('<div class="h-4 bg-gray-700 rounded w-3/4"></div>'),Qe=I('<div class="bg-gray-800 p-8 rounded-b-2xl shadow-xl"><div class="animate-pulse space-y-4"></div></div>'),We=I('<p class="text-red-500 text-sm mt-1">Invalid Roll or Batch</p>'),Xe=I('<p class="text-red-500 text-sm mt-1">Passwords do not match</p>'),Ze=I(`<form class="bg-gray-800 p-6 rounded-b-2xl shadow-xl space-y-6"><div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="fullName" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Name</label> <input id="fullName" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="username" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Username</label> <input id="username" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="email" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Email</label> <input id="email" type="email" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="roll" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Roll Number</label> <input id="roll" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="roll" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Phone Number</label> <input id="roll" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="batch" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Batch</label> <input id="batch" type="text" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"> <!></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="facebookProfile" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Facebook Profile</label> <input id="facebookProfile" type="url" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="password" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">New Password</label> <input id="password" type="password" placeholder="Enter New Password" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="confirmPassword" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Confirm Password</label> <input id="confirmPassword" type="password" placeholder="Confirm Password" class="bg-gray-700 text-white rounded p-2 w-full sm:w-2/3"> <!></div> <div class="flex flex-col sm:flex-row sm:items-center py-3 border-b border-gray-700"><label for="isAdmin" class="text-gray-400 w-full sm:w-1/3 mb-2 sm:mb-0">Administrator Access</label> <div class="w-full sm:w-2/3 flex items-center"><label class="inline-flex items-center cursor-pointer"><input id="isAdmin" type="checkbox" class="sr-only peer"> <div class="relative w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500"></div> <span class="ms-3 text-sm font-medium text-gray-300"> </span></label></div></div> <div class="flex flex-col justify-center sm:flex-row sm:gap-4 mt-8 sm:mt-6 gap-4"><button type="submit" class="bg-gradient-to-r from-green-400 to-blue-500 text-white font-semibold py-2 px-8 rounded-full shadow-md hover:scale-105 transform transition-all duration-200 ease-in-out w-full sm:w-auto">Save Changes</button> <button type="button" class="bg-red-500 text-white font-semibold py-2 px-8 rounded-full shadow-md hover:scale-105 transform transition-all duration-200 ease-in-out w-full sm:w-auto">Discard Changes</button> <button type="button" class="bg-gray-500 text-white font-semibold py-2 px-8 rounded-full shadow-md hover:scale-105 transform transition-all duration-200 ease-in-out w-full sm:w-auto">Reset Fields</button></div></form>`),et=I('<div class="min-h-screen bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"><div class="max-w-3xl mx-auto"><div class="bg-gray-800 rounded-t-2xl p-6 shadow-xl text-center"><h1 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-300 to-blue-300 mb-2">Edit Information</h1> <p class="text-transparent bg-clip-text bg-gradient-to-r from-blue-300 to-purple-300"> </p></div> <!></div></div>');function xt(ve,ge){Be(ge,!1);const Z=Oe(),ee=()=>be(qe,"$BASE_URL",Z),te=()=>be(Ye,"$page",Z),R=m();let S=m(""),c=m({}),B=m(!0),t=m({...e(c)}),y=m(""),_=m(""),D=m(!1),k=m(!0),w=m(!0),v=m(!1);async function xe(){try{const r=localStorage.getItem("jwtToken");if(r&&ze(r)&&!Ge(r)){const n=He(r);re=await(await X.get(`${(await e(S)).toString()}/users/id/${n}`)).data.data,(!re.isAdmin||!e(R))&&window.history.back()}}catch(r){console.error(r)}}let re={};Ve(async()=>{window.location.href.includes("/users/edit")?document.documentElement.style.overflowY="hidden":document.documentElement.style.overflowY="auto";try{const r=await X.get(`${(await e(S)).toString()}/users/id/${e(R)}`);a(c,await r.data.data),a(t,{...e(c)}),a(v,e(t).isAdmin||!1),a(B,!1)}catch(r){console.error(r),a(B,!1)}});function f(r){var n;((n=r==null?void 0:r.target)==null?void 0:n.id)==="isAdmin"&&(r.preventDefault(),x(t,e(t).isAdmin=r.target.checked),a(v,r.target.checked),window.scrollTo({top:0,behavior:"smooth"})),a(D,JSON.stringify(e(t))!==JSON.stringify(e(c))||e(y)!==""||e(_)!==""),e(t).batch&&e(t).roll&&ye()}function ae(){a(k,e(y)===e(_))}function ye(){var u,g;if(!((u=e(t))!=null&&u.batch)||!((g=e(t))!=null&&g.roll)){a(w,!0);return}const r=String(e(t).batch),n=String(e(t).roll);if(r.length>=2&&n.length>=3){const A=r.slice(-2),h=n.slice(1,3);a(w,A===h)}else a(w,!1)}async function he(){try{if(e(k)&&e(w)){a(v,e(t).isAdmin);const r={...e(t),password:e(y),batch:Number(e(t).batch),isAdmin:e(v)};await X.put(`${(await e(S)).toString()}/users/update/${e(c).ID}`,r),we("Profile updated successfully","success"),se(),a(D,!1)}}catch(r){console.error(r),we("Error updating profile","error")}}function _e(){a(t,{...e(c)}),a(y,""),a(_,""),a(D,!1),a(k,!0),a(w,!0),a(v,e(c).isAdmin||!1),se()}function ke(){a(t,{...e(c)}),a(y,""),a(_,""),a(k,!0),a(w,!0),a(v,e(c).isAdmin||!1)}function se(){window.history.back()}Q(()=>ee(),()=>{a(S,ee())}),Q(()=>te(),()=>{var r;a(R,(r=te().state)==null?void 0:r.id)}),Q(()=>{},()=>{xe()}),Le(),Je();var L=et(),le=i(L),T=i(le),oe=s(i(T),2),Ae=i(oe);o(oe),o(T);var Pe=s(T,2);{var Ie=r=>{var n=Qe(),u=i(n);Ue(u,4,()=>Array(6),Me,(g,A)=>{var h=Ke();P(g,h)}),o(u),o(n),P(r,n)},Ne=r=>{var n=Ze(),u=i(n),g=s(i(u),2);p(g),o(u);var A=s(u,2),h=s(i(A),2);p(h),o(A);var U=s(A,2),M=s(i(U),2);p(M),o(U);var F=s(U,2),j=s(i(F),2);p(j),o(F);var J=s(F,2),O=s(i(J),2);p(O),o(J);var Y=s(J,2),E=s(i(Y),2);p(E);var Se=s(E,2);{var De=l=>{var K=We();P(l,K)};W(Se,l=>{e(w)||l(De)})}o(Y);var V=s(Y,2),q=s(i(V),2);p(q),o(V);var z=s(V,2),$=s(i(z),2);p($),o(z);var G=s(z,2),N=s(i(G),2);p(N);var Ee=s(N,2);{var $e=l=>{var K=Xe();P(l,K)};W(Ee,l=>{e(k)||l($e)})}o(G);var H=s(G,2),ie=s(i(H),2),ne=i(ie),C=i(ne);p(C);var de=s(C,4),Ce=i(de,!0);o(de),o(ne),o(ie),o(H);var me=s(H,2),ce=i(me),fe=s(ce,2),Re=s(fe,2);o(me),o(n),ue(()=>{Fe(C,e(v)),pe(Ce,e(v)?"Enabled":"Disabled"),ce.disabled=!e(D)||!e(k)||!e(w)}),b(g,()=>e(t).fullName,l=>x(t,e(t).fullName=l)),d("input",g,f),b(h,()=>e(t).username,l=>x(t,e(t).username=l)),d("input",h,f),b(M,()=>e(t).email,l=>x(t,e(t).email=l)),d("input",M,f),b(j,()=>e(t).roll,l=>x(t,e(t).roll=l)),d("input",j,f),b(O,()=>e(t).phone,l=>x(t,e(t).phone=l)),d("input",O,f),b(E,()=>e(t).batch,l=>x(t,e(t).batch=l)),d("input",E,f),b(q,()=>e(t).fbLink,l=>x(t,e(t).fbLink=l)),d("input",q,f),b($,()=>e(y),l=>a(y,l)),d("input",$,f),d("blur",$,ae),b(N,()=>e(_),l=>a(_,l)),d("input",N,f),d("blur",N,ae),d("change",C,f),d("click",fe,_e),d("click",Re,ke),d("submit",n,je(he)),P(r,n)};W(Pe,r=>{e(B)?r(Ie):r(Ne,!1)})}o(le),o(L),ue(()=>pe(Ae,`Update account of ID: ${e(c).ID??""}`)),P(ve,L),Te()}export{xt as component};
