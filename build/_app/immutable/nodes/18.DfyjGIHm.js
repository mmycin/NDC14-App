import"../chunks/Bg9kRutz.js";import"../chunks/DUhZXiNj.js";import{p as he,l as y,b as ge,t as L,c as we,g as e,s as r,m as n,e as a,d as o,r as i,i as g}from"../chunks/DJc_ZBf1.js";import{s as I}from"../chunks/DEazUP1j.js";import{i as P,e as _e}from"../chunks/8oqJBz5t.js";import{a as w,t as _}from"../chunks/BTk0yM5Y.js";import{r as c}from"../chunks/nUEVBPDf.js";import{s as D}from"../chunks/C46Cb_u_.js";import{b as p}from"../chunks/C_lEBhVf.js";import{i as ke}from"../chunks/BLuxHWBz.js";import{s as ye,a as Le}from"../chunks/BSPJWgNF.js";import{a as Pe,B as Ee}from"../chunks/pUnYsnP1.js";import{N as O}from"../chunks/DzgOfrvm.js";import{g as Ne}from"../chunks/C9ThMXTw.js";var $e=_('<p class="text-red-500 text-sm mt-2"> </p>'),qe=_('<p class="text-red-500 text-sm mt-2"> </p>'),Ue=_('<p class="text-red-500 text-sm mt-2"> </p>'),Ae=_('<p class="text-red-500 text-sm mt-2"> </p>'),Be=_('<p class="text-red-500 text-sm mt-2">Passwords do not match</p>'),Re=_('<div class="container mx-auto px-4 py-12 svelte-1acp57a"><h1 class="text-3xl md:text-4xl font-extrabold text-white text-center mb-12">Add a New Captain</h1> <form class="bg-slate-800 p-8 rounded-3xl shadow-xl max-w-4xl mx-auto transform transition duration-300 hover:scale-105 svelte-1acp57a"><div class="mb-6"><label for="fullName" class="block text-white text-lg font-medium mb-2">Full Name</label> <input id="fullName" type="text" class="w-full bg-slate-700 text-white px-6 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent svelte-1acp57a" placeholder="Enter Full Name" required></div> <div class="mb-6"><label for="username" class="block text-white text-lg font-medium mb-2">Username</label> <input id="username" type="text" class="w-full bg-slate-700 text-white px-6 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent svelte-1acp57a" placeholder="Enter Username" required></div> <div class="mb-6"><label for="email" class="block text-white text-lg font-medium mb-2">Email</label> <input id="email" type="email" class="w-full bg-slate-700 text-white px-6 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent svelte-1acp57a" placeholder="Enter Email" required></div> <div class="mb-6"><label for="roll" class="block text-white text-lg font-medium mb-2">Roll Number</label> <input id="roll" type="text" placeholder="Enter Roll Number (e.g., 12014xxx)" required> <!></div> <div class="mb-6"><label for="roll" class="block text-white text-lg font-medium mb-2">Phone Number</label> <input id="roll" type="text" placeholder="Enter Phone Number (e.g., +8801xxxxxxxxx)" required> <!></div> <div class="mb-6"><label for="batch" class="block text-white text-lg font-medium mb-2">Batch</label> <input id="batch" type="number" min="2025" max="2040" placeholder="Enter Batch eg. 20xx" required> <!></div> <div class="mb-6"><label for="fbLink" class="block text-white text-lg font-medium mb-2">Facebook Profile Link</label> <input id="fbLink" type="url" placeholder="https://facebook.com/profile" required> <!></div> <div class="mb-6"><label for="password" class="block text-white text-lg font-medium mb-2">Password</label> <input id="password" type="password" class="w-full bg-slate-700 text-white px-6 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent svelte-1acp57a" placeholder="Enter Password" required></div> <div class="mb-6"><label for="confirmPassword" class="block text-white text-lg font-medium mb-2">Confirm Password</label> <input id="confirmPassword" type="password" class="w-full bg-slate-700 text-white px-6 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent svelte-1acp57a" placeholder="Confirm Password" required> <!></div> <div class="text-center"><button type="submit" class="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold py-3 px-6 rounded-full shadow-lg hover:scale-105 transition-all duration-300 svelte-1acp57a">Submit</button></div></form></div>');function Ke(ae,le){he(le,!1);const se=ye(),Q=()=>Le(Ee,"$BASE_URL",se);let W=n(""),E=n(""),N=n(""),$=n(""),d=n(""),b=n(""),f=n(""),m=n(""),q=n(""),k=n(""),U=n(!0),v=n(!0),x=n(!0),h=n(!0),l=n({roll:"",batch:"",fbLink:""});const oe=async t=>{if(t.preventDefault(),e(U)&&e(v)&&e(x)&&e(h)){const s={fullName:e(E),username:e(N),email:e($),roll:e(d),batch:parseInt(e(b)),fbLink:e(f),isAdmin:!1,phone:e(q),password:e(m)};try{const u=await Pe.post(`${(await e(W)).toString()}/users/signup`,s);O("User added successfully","success"),r(E,""),r(N,""),r($,""),r(d,""),r(b,""),r(f,""),r(q,""),r(m,""),r(k,""),Ne("/dashboard/users")}catch(u){O("Error adding user","error"),console.error(u)}}else O("Please correct the validation errors","error")};y(()=>Q(),()=>{r(W,Q())}),y(()=>(e(m),e(k)),()=>{r(U,e(m)===e(k))}),y(()=>e(d),()=>{const t=/^1[23][0-9]14([0-9]{3})$/;r(v,t.test(e(d))),e(d)?t.test(e(d))?parseInt(e(d).slice(-3))>150?(r(v,!1),g(l,e(l).roll="Last three digits should be between 000 and 150")):g(l,e(l).roll=""):g(l,e(l).roll="Invalid roll number format. Should be like 12014xxx or 13914xxx"):g(l,e(l).roll="")}),y(()=>(e(b),e(x)),()=>{const t=parseInt(e(b));r(x,t>=2023&&t<=2040),g(l,e(l).batch=e(b)?e(x)?"":"Batch must be between 2023 and 2040":"")}),y(()=>(e(h),e(f)),()=>{r(h,/^https:\/\/(?:www\.)?facebook\.com\/[a-zA-Z0-9.]{1,}$/.test(e(f))),g(l,e(l).fbLink=e(f)?e(h)?"":"Must be a valid Facebook profile URL (https://facebook.com/...)":"")}),ge(),ke();var F=Re(),C=a(o(F),2),V=o(C),X=a(o(V),2);c(X),i(V);var M=a(V,2),Y=a(o(M),2);c(Y),i(M);var T=a(M,2),ee=a(o(T),2);c(ee),i(T);var z=a(T,2),A=a(o(z),2);c(A);var ie=a(A,2);{var ne=t=>{var s=$e(),u=o(s,!0);i(s),L(()=>I(u,e(l).roll)),w(t,s)};P(ie,t=>{e(l).roll&&t(ne)})}i(z);var Z=a(z,2),B=a(o(Z),2);c(B);var de=a(B,2);{var ue=t=>{var s=qe(),u=o(s,!0);i(s),L(()=>I(u,e(l).roll)),w(t,s)};P(de,t=>{e(l).roll&&t(ue)})}i(Z);var j=a(Z,2),R=a(o(j),2);c(R);var ce=a(R,2);{var pe=t=>{var s=Ue(),u=o(s,!0);i(s),L(()=>I(u,e(l).batch)),w(t,s)};P(ce,t=>{e(l).batch&&t(pe)})}i(j);var G=a(j,2),S=a(o(G),2);c(S);var be=a(S,2);{var fe=t=>{var s=Ae(),u=o(s,!0);i(s),L(()=>I(u,e(l).fbLink)),w(t,s)};P(be,t=>{e(l).fbLink&&t(fe)})}i(G);var H=a(G,2),te=a(o(H),2);c(te),i(H);var J=a(H,2),K=a(o(J),2);c(K);var me=a(K,2);{var ve=t=>{var s=Be();w(t,s)};P(me,t=>{e(U)||t(ve)})}i(J);var re=a(J,2),xe=o(re);i(re),i(C),i(F),L(()=>{D(A,`w-full bg-slate-700 text-white px-6 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${(!e(v)&&e(d)?"border-2 border-red-500":"")??""} svelte-1acp57a`),D(B,`w-full bg-slate-700 text-white px-6 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${(!e(v)&&e(d)?"border-2 border-red-500":"")??""} svelte-1acp57a`),D(R,`w-full bg-slate-700 text-white px-6 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${(!e(x)&&e(b)?"border-2 border-red-500":"")??""} svelte-1acp57a`),D(S,`w-full bg-slate-700 text-white px-6 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${(!e(h)&&e(f)?"border-2 border-red-500":"")??""} svelte-1acp57a`),xe.disabled=!e(U)||!e(v)||!e(x)||!e(h)}),p(X,()=>e(E),t=>r(E,t)),p(Y,()=>e(N),t=>r(N,t)),p(ee,()=>e($),t=>r($,t)),p(A,()=>e(d),t=>r(d,t)),p(B,()=>e(q),t=>r(q,t)),p(R,()=>e(b),t=>r(b,t)),p(S,()=>e(f),t=>r(f,t)),p(te,()=>e(m),t=>r(m,t)),p(K,()=>e(k),t=>r(k,t)),_e("submit",C,oe),w(ae,F),we()}export{Ke as component};
